<!doctype html>
<html lang="ko" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="hmos.dev Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="hmos.dev Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-206743648-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MFNE9LTQG8"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-MFNE9LTQG8",{})</script><title data-react-helmet="true">How to cancel at axios | hmos.dev</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://hmos.dev/img/dark-room-computer.jpeg"><meta data-react-helmet="true" name="twitter:image" content="https://hmos.dev/img/dark-room-computer.jpeg"><meta data-react-helmet="true" property="og:url" content="https://hmos.dev/how-to-cancel-at-axios"><meta data-react-helmet="true" name="docusaurus_locale" content="ko"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" name="og:title" content="hmos.dev"><meta data-react-helmet="true" name="og:description" content="Front-end Developer Blog"><meta data-react-helmet="true" property="og:title" content="How to cancel at axios | hmos.dev"><meta data-react-helmet="true" name="description" content="The article that how to use cancel logic on axios request."><meta data-react-helmet="true" property="og:description" content="The article that how to use cancel logic on axios request."><meta data-react-helmet="true" name="keywords" content="axios,javascript,HTTP,cancel,abort"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-09-17T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/HyunmoAhn"><meta data-react-helmet="true" property="article:tag" content="axios,library,how-to-work,javascript,web"><link data-react-helmet="true" rel="shortcut icon" href="/favicon/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://hmos.dev/how-to-cancel-at-axios"><link data-react-helmet="true" rel="alternate" href="https://hmos.dev/how-to-cancel-at-axios" hreflang="ko"><link data-react-helmet="true" rel="alternate" href="https://hmos.dev/en/how-to-cancel-at-axios" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://hmos.dev/how-to-cancel-at-axios" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d5a1afa6.css">
<link rel="preload" href="/assets/js/runtime~main.1447f857.js" as="script">
<link rel="preload" href="/assets/js/main.47fa5a87.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">ë³¸ë¬¸ìœ¼ë¡œ ê±´ë„ˆë›°ê¸°</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="hmos Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="hmos Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">hmos.dev</b></a><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/tags">Tags</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_3vod"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>í•œêµ­ì–´</span></span></a><ul class="dropdown__menu"><li><a href="/how-to-cancel-at-axios" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">í•œêµ­ì–´</a></li><li><a href="/en/how-to-cancel-at-axios" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li></ul></div><a href="https://github.com/HyunmoAhn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--checked react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/deep-dive-to-immer">immer ë‚´ë¶€ ì‚´í´ë³´ê¸°</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/how-to-time-travel-debugging-at-redux-devtools">redux-devtoolsì˜ time-travel-debugging í†ºì•„ë³´ê¸°</a></li><li class="sidebarItem_2UVv"><a aria-current="page" class="sidebarItemLink_1RT6 sidebarItemLinkActive_12pM" href="/how-to-cancel-at-axios">How to cancel at axios</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_GeHD" itemprop="headline">How to cancel at axios</h1><div class="blogPostData_291c margin-vert--md"><time datetime="2021-09-17T00:00:00.000Z" itemprop="datePublished">2021ë…„ 9ì›” 17ì¼</time> Â· ì•½ 6ë¶„</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/HyunmoAhn" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://github.com/HyunmoAhn.png" alt="Hyunmo Ahn"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/HyunmoAhn" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Hyunmo Ahn</span></a></div><small class="avatar__subtitle" itemprop="description">Front End Engineer @ Line Financial+</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="purpose"></a>Purpose<a class="hash-link" href="#purpose" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">#</a></h2><p><a href="https://github.com/axios/axios" target="_blank" rel="noopener noreferrer">axios</a> ì—ì„œëŠ” HTTP Requestë¥¼ cancelí•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ì´ cancel ê¸°ëŠ¥ì´ ì–´ë–¤ ë¡œì§ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ ì•Œì•„ë³¸ë‹¤.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Prerequisites</h5></div><div class="admonition-content"><ul><li>HTTP ìš”ì²­ì— ëŒ€í•œ ëŒ€ëµì ì¸ ì§€ì‹</li><li><a href="https://github.com/axios/axios" target="_blank" rel="noopener noreferrer">Axios</a> ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ëŒ€í•œ ì‚¬ìš©ë°©ë²•</li></ul></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="usage"></a>Usage<a class="hash-link" href="#usage" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">#</a></h2><p>Cancelì´ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì•Œì•„ë³´ê¸° ì´ì „ì—, axiosì—ì„œ cancelì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ í™•ì¸í•©ë‹ˆë‹¤.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="simple-usage"></a>Simple Usage<a class="hash-link" href="#simple-usage" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> axios </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;axios&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Make CancelToken</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token maybe-class-name">CancelToken</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> axios</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token maybe-class-name">CancelToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> source </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">CancelToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Register Cancel</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">axios</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/url&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> cancelToken</span><span class="token operator">:</span><span class="token plain"> source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">token </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">axios</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">isCancel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">/* cancel logic */</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Create Cancel</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">cancel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;message&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_Ue-o clean-btn">ë³µì‚¬</button></div></div><p>axiosì—ì„œ cancelì„ í•˜ê³ ìí•œë‹¤ë©´, ë¨¼ì € <code>CancelToken</code>ì„ ë§Œë“¤ì–´ì•¼í•œë‹¤. <br>
ë§¤ axios í˜¸ì¶œì‹œë§ˆë‹¤ cancelTokenì„ ì „ë‹¬í•˜ê²Œ ë˜ê³ , <code>source.cancel</code> ì„ í†µí•´ì„œ axiosë¥¼ cancelí•˜ëŠ” ê²ƒì´ë‹¤.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="advanced-usage"></a>Advanced Usage<a class="hash-link" href="#advanced-usage" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">#</a></h3><p>ì—¬ëŸ¬ axiosìš”ì²­ì„ ë™ì‹œì— ë³´ë‚¸ë‹¤ë©´ cancelì€ ì–´ë–¤ ë™ì‘ì„ ë³´ì—¬ì¤„ê¹Œ?</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> axios </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;axios&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Make CancelToken</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token maybe-class-name">CancelToken</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> axios</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token maybe-class-name">CancelToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> source </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">CancelToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Register Cancel</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">axios</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/url/first&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> cancelToken</span><span class="token operator">:</span><span class="token plain"> source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">token </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">code </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;403&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// session expired </span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">cancel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;session expired&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Register Cancel</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">axios</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/url/second&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> cancelToken</span><span class="token operator">:</span><span class="token plain"> source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">token </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">axios</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">isCancel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">/* cancel logic */</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_Ue-o clean-btn">ë³µì‚¬</button></div></div><p>ìœ„ì™€ ê°™ì´ axios ìš”ì²­ 2ê°œë¥¼ ë™ì‹œì— ë³´ëƒˆì„ ë•Œ ê°€ì •í•  ì‹œë‚˜ë¦¬ì˜¤ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. </p><ul><li><code>/url/first</code>ì˜ ì‘ë‹µì´ <code>/url/second</code>ì˜ ì‘ë‹µë³´ë‹¤ ë¹ ë¥´ê²Œ ë„ë‹¬í–ˆë‹¤.</li><li><code>/url/first</code>ì€ 403 ì„¸ì…˜ ë§Œë£Œ ì—ëŸ¬ë¥¼ ë°›ì•˜ë‹¤.</li></ul><p>ê·¸ë ‡ë‹¤ë©´ <code>/url/second</code>ì˜ ì‘ë‹µì€ ì–´ë–»ê²Œ ì²˜ë¦¬ê°€ ë ê¹Œ?</p><p>ì •ë‹µì€ <code>/url/first</code> ì—ì„œ cancelí•œ ì‹œì ì— <code>/url/second</code> ìš”ì²­ë„ cancelì´ ëœë‹¤ëŠ” ì ì´ë‹¤. <code>/url/first</code> ìš”ì²­ê³¼ <code>/url/second</code> ìš”ì²­ì´ ì„œë¡œ ë‹¤ë¥¸ ìŠ¤ì½”í”„ì— ìˆë”ë¼ë„ ë§ˆì°¬ê°€ì§€ì´ë‹¤. </p><p><strong><code>/url/first</code> axios ì—ì„œ cancel í•œ ê²ƒì´ ì–´ë–»ê²Œ <code>/url/second</code> axios ì—ë„ ì˜í–¥ì„ ë¼ì¹˜ê³  ìˆì„ê¹Œì— ëŒ€í•œ í˜¸ê¸°ì‹¬ì— ì´ ê¸€ì€ ì¶œë°œí•œë‹¤.</strong></p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Question</h5></div><div class="admonition-content"><p>Q1. í•˜ë‚˜ì˜ axiosìš”ì²­ì—ì„œ cancelTokenì´ cancelë˜ì—ˆëŠ”ë° ì–´ë–»ê²Œ ë‹¤ë¥¸ axios requestê°€ ê°™ì´ ì·¨ì†Œê°€ ë ê¹Œ?</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="inner-axios"></a>Inner Axios<a class="hash-link" href="#inner-axios" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="what-about-canceltoken"></a>What about CancelToken<a class="hash-link" href="#what-about-canceltoken" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">#</a></h3><p><a href="https://github.com/axios/axios/blob/v0.21.1/lib/axios.js#L40-L42" target="_blank" rel="noopener noreferrer">axios</a>ì—ëŠ” Cancelê³¼ ê´€ë ¨ëœ ë©”ì†Œë“œê°€ ë¶™ì–´ìˆë‹¤.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// https://github.com/axios/axios/blob/v0.21.1/lib/axios.js#L40-L42</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Expose Cancel &amp; CancelToken</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">axios</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token maybe-class-name">Cancel</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;./cancel/Cancel&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">axios</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token maybe-class-name">CancelToken</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;./cancel/CancelToken&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">axios</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">isCancel </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;./cancel/isCancel&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_Ue-o clean-btn">ë³µì‚¬</button></div></div><p>axios cancelì„ ìœ„í•´ì„œ ì„ í–‰ë˜ì—ˆë˜ ì‘ì—…ì€ CancelTokenì„ ë§Œë“œëŠ” ê²ƒ ì´ì—ˆë‹¤. <code>CancelToken.source</code>ë¥¼ ì‚¬ìš©í•´ì„œ í† í°ì„ ìƒì„±í–ˆìœ¼ë¯€ë¡œ, <a href="https://github.com/axios/axios/blob/v0.21.1/lib/cancel/CancelToken.js" target="_blank" rel="noopener noreferrer">axios.CancelToken</a> ì„ ë¨¼ì € ì‚´í´ë³¸ë‹¤.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// https://github.com/axios/axios/blob/v0.21.1/lib/cancel/CancelToken.js</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token maybe-class-name">CancelToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function-variable function" style="color:rgb(80, 250, 123)">source</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> cancel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> token </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">CancelToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">executor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">c</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cancel </span><span class="token operator">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    token</span><span class="token operator">:</span><span class="token plain"> token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cancel</span><span class="token operator">:</span><span class="token plain"> cancel</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_Ue-o clean-btn">ë³µì‚¬</button></div></div><p>sourceëŠ” ë‹¨ìˆœí•˜ë‹¤. tokenê³¼ cancelì„ ê°€ì§€ê³  ìˆëŠ” ê°ì²´ë¥¼ ë°˜í™˜í•˜ë©°, ë‚´ë¶€ì—ì„œ CancelTokenì„ ìƒì„±í•œë‹¤.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// https://github.com/axios/axios/blob/v0.21.1/lib/cancel/CancelToken.js</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(80, 250, 123)">CancelToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">executor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> resolvePromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">promise </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name known-class-name class-name">Promise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">promiseExecutor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    resolvePromise </span><span class="token operator">=</span><span class="token plain"> resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> token </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">executor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">cancel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">reason </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Cancel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// https://github.com/axios/axios/blob/v0.21.1/lib/cancel/Cancel.js</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">resolvePromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">reason</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_Ue-o clean-btn">ë³µì‚¬</button></div></div><p><a href="https://github.com/axios/axios/blob/v0.21.1/lib/cancel/CancelToken.js" target="_blank" rel="noopener noreferrer">CancelToken</a> ìƒì„±ì— ëŒ€í•´ì„œ ë³´ë©´ ì¡°ê¸ˆ êµ¬ì¡°ê°€ ë³µì¡í•´ë³´ì´ì§€ë§Œ, í•˜ëŠ” ì—­í• ì€ 2ê°€ì§€ì´ë‹¤.</p><ol><li><code>CancelToken</code>ì— promiseë¥¼ ìƒì„±í•œë‹¤. ì´ promiseê°€ ì–´ë–»ê²Œ ì“°ì´ëŠ”ì§€ëŠ” ì•„ì§ ì•Œ ìˆ˜ ì—†ë‹¤.</li><li><code>CancelToken.source</code> ìŠ¤ì½”í”„ì— ìˆëŠ” cancelì— <code>function cancel</code>ì„ í• ë‹¹í•œë‹¤. ì´ë¥¼ í†µí•´ì„œ cancelì´ ìŠ¤ì½”í”„ ì™¸ë¶€ì™€ ì—°ê²°ì´ ëœë‹¤.</li></ol><p>CancelTokenì€ promiseì™€ cancel í•¨ìˆ˜ 2ê°€ì§€ë¥¼ ë§Œë“¤ë©°, cancelì„ í˜¸ì¶œí–ˆì„ë•Œ promiseê°€ resolveë˜ëŠ” ë¡œì§ì„ ê°–ê³ ìˆë‹¤. cancelì€ <code>executor</code>ë¥¼ í†µí•´ì„œ <code>CancelToken.source</code> ìŠ¤ì½”í”„ë¡œ í™•ì¥ë˜ê³  ì´ëŠ” ì™¸ë¶€ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë©”ì†Œë“œê°€ ëœë‹¤. </p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithHideOnScrollNavbar_3R7-" id="recap-about-canceltoken"></a>Recap about CancelToken<a class="hash-link" href="#recap-about-canceltoken" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">#</a></h4><ul><li>CancelTokenì€ <code>CancelToken.source</code>ë¥¼ í†µí•´ì„œ ìƒì„±ë˜ë©°, promiseì™€ cancel í•¨ìˆ˜ë¥¼ ê°ê° ìƒì„±í•œë‹¤.</li><li>ì—¬ê¸°ì„œ ìƒì„±ëœ <code>cancel</code>ì€ <code>CancelToken.source</code> ë¦¬í„´ ê°’ìœ¼ë¡œ ì „ë‹¬ë˜ì–´ ì™¸ë¶€ì—ì„œ ì‚¬ìš©ê°€ëŠ¥í•œ í•¨ìˆ˜ë¡œ ì‚¬ìš©ë˜ë©°, promiseì˜ ìš©ë„ëŠ” ì•„ì§ ì•Œ ìˆ˜ ì—†ë‹¤.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="where-do-use-canceltokenpromise"></a>Where do use CancelToken.promise?<a class="hash-link" href="#where-do-use-canceltokenpromise" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">#</a></h3><p>axiosëŠ” ë‚´ë¶€ì ìœ¼ë¡œ HTTP ìš”ì²­ì— adapterë¥¼ ì‚¬ìš©í•˜ê³  adapterì•ˆì— ì´ì™€ ê´€ë ¨ëœ ì½”ë“œê°€ ë“¤ì–´ìˆë‹¤.
ê·¸ ì¤‘ì— <a href="https://github.com/axios/axios/blob/master/lib/adapters/xhr.js" target="_blank" rel="noopener noreferrer">xhr</a>ìª½ ì½”ë“œë¥¼ ë³¸ë‹¤.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// https://github.com/axios/axios/blob/master/lib/adapters/xhr.js#L22-L187</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> request </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">XMLHttpRequest</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">request</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">open</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">method</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">toUpperCase</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">buildURL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">fullPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">params</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">paramsSerializer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">request</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function-variable function" style="color:rgb(80, 250, 123)">onreadystatechange</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">handleLoad</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// HTTP success logic </span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">request</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">send</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">requestData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_Ue-o clean-btn">ë³µì‚¬</button></div></div><p>ê¸°ë³¸ ë™ì‘ì€ ì¼ë°˜ì ìœ¼ë¡œ <a href="https://developer.mozilla.org/ko/docs/Web/API/XMLHttpRequest" target="_blank" rel="noopener noreferrer">XMLHttpRequest</a>ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ê³¼ ë™ì¼í•˜ë‹¤. <code>request.open</code>ì„ í†µí•´ì„œ urlì„ ì—°ê²°í•˜ê³ , <code>onreadystatechange</code>ë¥¼ í†µí•´ì„œ ì„±ê³µì— ëŒ€í•´ì„œ í•¸ë“¤ë§ì„ í•˜ê³ , <code>request.send</code>ë¥¼ í†µí•´ì„œ HTTP ìš”ì²­ì„ ë³´ë‚¸ë‹¤.
ì—¬ê¸°ê¹Œì§€ëŠ” ì½œë°± ë°©ì‹ì˜ XMLHttpRequestì™€ ë™ì¼í•˜ë‹¤.</p><p>ì¼ë°˜ ë™ì‘ ì´ì™¸ì—ë„ axiosì˜ xhr adapterì—ì„œëŠ” cancelTokenì„ ì´ìš©í•´ì„œ promise ë¡œì§ì„ í•˜ë‚˜ ë” ì‚¬ìš©í•œë‹¤.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// https://github.com/axios/axios/blob/master/lib/adapters/xhr.js#L168-L180</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">cancelToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// Handle cancellation</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">cancelToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">promise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">onCanceled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">cancel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">!</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    request</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">abort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cancel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Clean up request</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    request </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_Ue-o clean-btn">ë³µì‚¬</button></div></div><p><code>CancelToken.promise</code>ì€ ì—¬ê¸°ì„œ ì‚¬ìš©í•œë‹¤. ë§¤ HTTP ìš”ì²­ë§ˆë‹¤ cancelTokenì„ ì´ìš©í•´ì„œ promiseë¥¼ í˜¸ì¶œí•˜ê³  ìˆë‹¤. <strong>ì¦‰, ë§ˆì¹˜ <code>Promise.race</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ ì²˜ëŸ¼ <code>xhr</code>ìš”ì²­ ì‘ë‹µê³¼ <code>cancelToken.promise</code>ì˜ ë‘ê°€ì§€ ì¤‘ ë¨¼ì € ì˜¤ëŠ” ê²ƒì„ ì²˜ë¦¬í•˜ëŠ” ë¡œì§</strong>ì„ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²ƒì´ë‹¤.</p><p>cancelTokenì˜ promiseê°€ resolveë˜ë©´ xhr requestëŠ” abortë˜ê³  axios requestëŠ” rejectë¡œ ì¢…ë£Œë˜ê²Œëœë‹¤. ì´ë•Œ ì—ëŸ¬ê°ì²´ëŠ” <a href="https://github.com/axios/axios/blob/v0.21.1/lib/cancel/Cancel.js" target="_blank" rel="noopener noreferrer">cancel</a>ê°ì²´ê°€ ì „ë‹¬ëœë‹¤.</p><p>cancelTokenì€ axios requestë•Œ ì£¼ì…ì„ ë°›ê³ , ì—¬ëŸ¬ axios requestê°€ ë™ì¼í•œ cancelTokenì„ ì‚¬ìš©í•œë‹¤. ë”°ë¼ì„œ ìš°ë¦¬ëŠ” ì²˜ìŒ ê°€ì¡Œë˜ ì§ˆë¬¸ì— ëŒ€ë‹µì„ í•  ìˆ˜ ìˆë‹¤.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Question &amp; Answer</h5></div><div class="admonition-content"><blockquote><p>Q1. í•˜ë‚˜ì˜ axiosìš”ì²­ì—ì„œ cancelTokenì´ cancelë˜ì—ˆëŠ”ë° ì–´ë–»ê²Œ ë‹¤ë¥¸ axios requestê°€ ê°™ì´ ì·¨ì†Œê°€ ë ê¹Œ?</p></blockquote><p>A1. axiosëŠ” HTTP ìš”ì²­ë§ˆë‹¤ cancelTokenì„ ë°›ê³ , cancelTokenì˜ promiseë¥¼ í†µí•´ì„œ xhr ìš”ì²­ê³¼ race(ê²½ìŸ)ìƒíƒœì— ë“¤ì–´ê°„ë‹¤.
ë‹¤ë¥¸ axios ìš”ì²­ì—ì„œ cancelTokenì´ resolve ë˜ì—ˆë‹¤ë©´ ë™ì¼í•œ cancelTokenì„ ì£¼ì…ë°›ì€ ëª¨ë“  axios ìš”ì²­ì€ promiseê°€ resolveë˜ì–´ rejectë¡œ ì¢…ë£Œëœë‹¤.</p><p>ì¦‰, ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ìˆëŠ” cancelTokenì˜ promise ìƒíƒœì— ë”°ë¼ rejectë¥¼ ì§„í–‰í•˜ê³  ìˆê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ axios ìš”ì²­ì—ì„œ cancelì´ ë°œìƒí•˜ë©´, ë‚˜ë¨¸ì§€ axios ìš”ì²­ë„ í•¨ê»˜ cancelì´ ë°œìƒë˜ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="recap"></a>Recap<a class="hash-link" href="#recap" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">#</a></h2><p>axiosëŠ” í˜¸ì¶œì‹œ HTTPìš”ì²­ ë¿ ì•„ë‹ˆë¼ cancelê³¼ ê´€ë ¨ë˜ì–´ ìˆëŠ” promiseë¥¼ ë°œìƒì‹œì¼œ ê²½ìŸìƒíƒœë¥¼ í˜•ì„±í•œë‹¤. ì´ ê³¼ì •ì—ì„œ ì‚¬ìš©ë˜ëŠ” cancel promiseëŠ” ì—¬ëŸ¬ axios ìš”ì²­ì—ì„œ ì‚¬ìš© ë  ìˆ˜ ìˆë‹¤. <br>
cancelê³¼ ê´€ë ¨ëœ promiseëŠ” <a href="https://github.com/axios/axios/blob/v0.21.1/lib/cancel/CancelToken.js" target="_blank" rel="noopener noreferrer">cancelToken</a>ì„ ë§Œë“¤ ë•Œ ê°™ì´ ìƒì„±ë˜ë©° cancelTokenì—ëŠ” cancel promiseë¥¼ resolve ì‹œí‚¤ëŠ” í•¨ìˆ˜ <code>cancel</code>ë„ ê°™ì´ ì œê³µí•œë‹¤.<br>
<code>cancelToken.cancel</code>ì´ í˜¸ì¶œë˜ë©´ cancel promiseëŠ” resolveë˜ê³  ì´ëŠ” HTTP ìš”ì²­ê³¼ ê²½ìŸìƒíƒœë¥¼ í˜•ì„±í•˜ê³  ìˆê¸° ë•Œë¬¸ì— cancelëœ <code>cancelToken</code>ì„ ì‚¬ìš©í•˜ê³  ìˆëŠ” ëª¨ë“  axios ìš”ì²­ì€ abortë˜ê³  rejectë¡œ ë°˜í™˜ëœë‹¤.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="appendix"></a>Appendix<a class="hash-link" href="#appendix" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">#</a></h2><p>axiosê°€ cancelì„ ì–´ë–»ê²Œ ì²˜ë¦¬í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì•˜ë‹¤. ì´í›„ ê¸€ì—ì„œëŠ” axios cancelì„ ì‚¬ìš©í–ˆì„ë•Œ ë§Œë‚˜ê²Œ ë˜ëŠ” ê¶ê¸ˆì¦ì— ëŒ€í•´ì„œ ì‚´í´ë³¼ ê²ƒì´ë‹¤. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="what-happens-to-canceltoken-that-have-already-been-canceled"></a>What happens to cancelToken that have already been canceled?<a class="hash-link" href="#what-happens-to-canceltoken-that-have-already-been-canceled" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">#</a></h3><p>ì´ì œê» cancelTokenì„ cancelí–ˆì„ ë•Œ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì•˜ë‹¤. ê·¸ë ‡ë‹¤ë©´ ì´ë¯¸ cancelëœ cancelTokenì€ ì–´ë–»ê²Œ ë™ì‘í• ê¹Œ? <br>
ìœ„ì—ì„œë„ ì‚´í´ë³´ì•˜ë˜ <a href="https://github.com/axios/axios/blob/v0.21.1/lib/cancel/CancelToken.js" target="_blank" rel="noopener noreferrer">CancelToken</a>ì„ ë‹¤ì‹œ ì‚´í´ë³´ì.
cancelì´ ë°œìƒí–ˆì„ ë•Œ, <code>CancelToken.reason</code>ì—ëŠ” <a href="https://github.com/axios/axios/blob/v0.21.1/lib/cancel/Cancel.js" target="_blank" rel="noopener noreferrer">Cancel</a> ê°ì²´ê°€ í• ë‹¹ëœë‹¤. ì´ reasonì´ cancel ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ëŠ”ë° ì´ìš©ëœë‹¤.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// https://github.com/axios/axios/blob/v0.21.1/lib/cancel/CancelToken.js</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(80, 250, 123)">CancelToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">executor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> resolvePromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">promise </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name known-class-name class-name">Promise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">promiseExecutor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    resolvePromise </span><span class="token operator">=</span><span class="token plain"> resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> token </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">executor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">cancel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">reason </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Cancel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// https://github.com/axios/axios/blob/v0.21.1/lib/cancel/Cancel.js</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">resolvePromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">reason</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_Ue-o clean-btn">ë³µì‚¬</button></div></div><p>CancelTokenì—ëŠ” cancelë˜ì—ˆëŠ”ì§€ë¥¼ íŒë‹¨í•˜ëŠ” ë‹¤ë¥¸ ë©”ì†Œë“œê°€ ìˆë‹¤. <a href="https://github.com/axios/axios/blob/v0.21.1/lib/cancel/CancelToken.js#L36-L40" target="_blank" rel="noopener noreferrer">CancelToken.throwIfRequested</a>ê°€ ë°”ë¡œ ê·¸ ì—­í• ì„ í•œë‹¤.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token maybe-class-name">CancelToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">prototype</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function-variable function" style="color:rgb(80, 250, 123)">throwIfRequested</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">throwIfRequested</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">reason</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">reason</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_Ue-o clean-btn">ë³µì‚¬</button></div></div><p>reasonì´ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ê³ , reasonì´ ìˆìœ¼ë©´ ì´ë¯¸ cancelëœ tokenì´ë¼ íŒë‹¨í•˜ê³  reasonì„ throwí•œë‹¤.</p><p>ì´ <code>throwIfRequested</code>ëŠ” axios requestì˜ ì—¬ëŸ¬ êµ°ë°ì—ì„œ ë°œê²¬ëœë‹¤. ì•„ë§ˆ ë‹¤ì–‘í•œ ì¼€ì´ìŠ¤ì—ì„œ cancelì´ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ ì¡°ì¹˜ë“¤ì´ ì·¨í•´ì§„ ê²ƒìœ¼ë¡œ ì¶”ì •ëœë‹¤.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// https://github.com/axios/axios/blob/v0.21.1/lib/core/dispatchRequest.js</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">throwIfCancellationRequested</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">cancelToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">cancelToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">throwIfRequested</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">module</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function-variable function" style="color:rgb(80, 250, 123)">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">dispatchRequest</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">throwIfCancellationRequested</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">...</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">adapter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">onAdapterResolution</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">throwIfCancellationRequested</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">...</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_Ue-o clean-btn">ë³µì‚¬</button></div></div><p>ë”°ë¼ì„œ í•œë²ˆ cancelëœ cancelTokenì€ axiosìš”ì²­ì‹œ ìë™ìœ¼ë¡œ rejectë¡œ ë¹ ì§€ë„ë¡ êµ¬í˜„ë˜ì–´ìˆë‹¤.
cancel ì´í›„ ë‹¤ì‹œ axios ìš”ì²­ì„ ì •ìƒí™”ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” cancelëœ CancelTokenì„ ë²„ë¦¬ê³ , ìƒˆë¡­ê²Œ CancelTokenì„ ìƒì„±í•´ì„œ axiosë¥¼ í˜¸ì¶œí•´ì•¼ axios ìš”ì²­ì´ ì¤‘ë‹¨ ë˜ì§€ ì•Šê³  ì •ìƒ í˜¸ì¶œì„ í•  ê²ƒì´ë‹¤. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="reference"></a>Reference<a class="hash-link" href="#reference" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">#</a></h2><ul><li><a href="https://github.com/axios/axios/tree/v0.21.1" target="_blank" rel="noopener noreferrer">axios github</a></li><li><a href="https://axios-http.com/docs/cancellation" target="_blank" rel="noopener noreferrer">axios cancellation docs</a></li></ul></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_3kfx"><div class="col"><b>íƒœê·¸:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/axios">axios</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/library">library</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/how-to-work">how-to-work</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/javascript">javascript</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/web">web</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ë¸”ë¡œê·¸ ê²Œì‹œë¬¼ íƒìƒ‰"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/how-to-time-travel-debugging-at-redux-devtools"><div class="pagination-nav__sublabel">ì´ì „ ê²Œì‹œë¬¼</div><div class="pagination-nav__label">Â« redux-devtoolsì˜ time-travel-debugging í†ºì•„ë³´ê¸°</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#purpose" class="table-of-contents__link">Purpose</a></li><li><a href="#usage" class="table-of-contents__link">Usage</a><ul><li><a href="#simple-usage" class="table-of-contents__link">Simple Usage</a></li><li><a href="#advanced-usage" class="table-of-contents__link">Advanced Usage</a></li></ul></li><li><a href="#inner-axios" class="table-of-contents__link">Inner Axios</a><ul><li><a href="#what-about-canceltoken" class="table-of-contents__link">What about CancelToken</a></li><li><a href="#where-do-use-canceltokenpromise" class="table-of-contents__link">Where do use CancelToken.promise?</a></li></ul></li><li><a href="#recap" class="table-of-contents__link">Recap</a></li><li><a href="#appendix" class="table-of-contents__link">Appendix</a><ul><li><a href="#what-happens-to-canceltoken-that-have-already-been-canceled" class="table-of-contents__link">What happens to cancelToken that have already been canceled?</a></li></ul></li><li><a href="#reference" class="table-of-contents__link">Reference</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/about">About</a></li><li class="footer__item"><a href="https://github.com/HyunmoAhn" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>Copyright Â© 2021 Hyunmo Ahn. Built with Docusaurus.
</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1447f857.js"></script>
<script src="/assets/js/main.47fa5a87.js"></script>
</body>
</html>